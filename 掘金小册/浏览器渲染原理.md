#### 为什么操作 DOM 慢

-  DOM 是属于渲染引擎中的东西，而 JS 又是 JS 引擎中的东西

- 当通过 JS 操作 DOM 的时候，涉及到两个线程之间的通信，势必带来性能的损耗



#### 插入几万个 DOM，如何实现页面不卡顿？

- 肯定不能一次性把几万个 DOM 全部插入

**虚拟滚动**

- `requestAnimationFrame`的方式去循环的插入 DOM 16ms

- **只渲染可视区域内的内容，非可见区域的那就完全不渲染了，当用户在滚动的时候就实时去替换渲染的内容**



#### 什么情况阻塞渲染

- 渲染的前提是生成渲染树，所以 HTML 和 CSS 肯定会阻塞渲染。

- 想渲染的越快，越应该降低一开始需要渲染的文件**大小**，并且**扁平层级，优化选择器**

- 当浏览器在解析到 `script` 标签时，会暂停构建 DOM，完成后才会从暂停的地方重新开始
- 想首屏渲染的越快，就越不应该在首屏就加载 JS 文件
- script 标签放在底部

- 还可以给 script 标签加上 defer 或者 async，这样无论 script 标签写在哪都不会阻塞渲染



#### 重绘 和 回流

- 重绘是当节点需要更改外观而不会影响布局的，比如改变 `color` 就叫称为重绘
- 回流是布局或者几何属性需要改变就称为回流。



#### 在不考虑缓存和优化网络协议的前提下，考虑可以通过哪些方式来最快的渲染页面，也就是常说的关键渲染路径

- 从文件大小考虑
- 从 `script` 标签使用上来考虑
- 从 CSS、HTML 的代码书写上来考虑
- 资源加载的速度，CDN
- 从需要下载的内容是否需要在首屏使用上来考虑


